#include "FileNameHandle.h"#define MAXLOOPFILENAME 300int initialFileNameHandle(FileNameHandle *fileNameHandle){    int res = 0;    if(fileNameHandle != NULL)    {        initialSimString(&(fileNameHandle->nameFile));        initialSimString(&(fileNameHandle->typeFile));        fileNameHandle->numDuplicate = 0;        fileNameHandle->asciiPrefix = '(';        fileNameHandle->asciiSuffix = ')';        fileNameHandle->saveType = 0; /* 1 replace old file*/        res = 1;    }    else    {        /* do noting */    }    return res;}void destructFileNameHandle(FileNameHandle *fileNameHandle){    if(fileNameHandle != NULL)    {        destructSimString(&(fileNameHandle->nameFile));        destructSimString(&(fileNameHandle->typeFile));        fileNameHandle->numDuplicate = 0;        fileNameHandle->asciiPrefix = '(';        fileNameHandle->asciiSuffix = ')';        fileNameHandle->saveType = 0; /* 1 replace old file*/    }    else    {        /* do noting */    }}simString getFileName(FileNameHandle *fileNameHandle){    int res = 0;    char bufferNum[10];    FILE *fp = NULL;    simString buffStr;    simString pointSim;    simString numStr;    char point[] =".";    initialSimString(&numStr);    initialSimString(&pointSim);    initialSimString(&buffStr);/* 0 replace old file,increace step 1 steps, */    if(fileNameHandle != NULL)    {        convertCString2SimString(&pointSim,point);        if(fileNameHandle->saveType == 1) /* 1 replace old file,i */        {            res = concatSimString(&buffStr,&(fileNameHandle->nameFile),&buffStr);            res &=concatSimString(&buffStr,&pointSim,&buffStr);            res = concatSimString(&buffStr,&(fileNameHandle->typeFile),&buffStr);        }        else if(fileNameHandle->saveType == 0) /* increace step 1 steps */        {             res = concatSimString(&buffStr,&(fileNameHandle->nameFile),&buffStr);            res &=concatSimString(&buffStr,&pointSim,&buffStr);            res = concatSimString(&buffStr,&(fileNameHandle->typeFile),&buffStr);            fp = fopen(buffStr.data,"r");            while(fp != NULL && fileNameHandle->numDuplicate <MAXLOOPFILENAME)            {                fclose(fp);                fp = NULL;                convertCString2SimString(&buffStr,"");                if(fileNameHandle->asciiPrefix <1 && fileNameHandle->asciiSuffix > 0)                {                    sprintf (bufferNum, "%d%c",++(fileNameHandle->numDuplicate),fileNameHandle->asciiSuffix);                }                else if(fileNameHandle->asciiSuffix < 1 && fileNameHandle->asciiPrefix >0)                {                    sprintf (bufferNum, "%c%d",fileNameHandle->asciiPrefix,++(fileNameHandle->numDuplicate));                }                else if(fileNameHandle->asciiPrefix >0 && fileNameHandle->asciiSuffix >0)                {                    sprintf (bufferNum, "%c%d%c",fileNameHandle->asciiPrefix,++(fileNameHandle->numDuplicate),fileNameHandle->asciiSuffix);                }                else                {                       sprintf (bufferNum, "%d",++(fileNameHandle->numDuplicate));                      }                res = concatSimString(&buffStr,&(fileNameHandle->nameFile),&buffStr);                convertCString2SimString(&numStr,bufferNum);                res &=concatSimString(&buffStr,&numStr,&buffStr);                res &=concatSimString(&buffStr,&pointSim,&buffStr);                res = concatSimString(&buffStr,&(fileNameHandle->typeFile),&buffStr);                fp = fopen(buffStr.data,"r");            }        }        else        {            /* do nothing */        }    }    else    {        /* do nothing */    }    if(fp != NULL)    {        fclose(fp);    }    else    {        /* do nothing */    }    destructSimString(&pointSim);    destructSimString(&numStr);    return buffStr;}int setAllValueOfFileNameHandle(FileNameHandle *fileNameHandle,simString* name,simString* type,char saveT,char ascii1,char ascii2){    int res =0;    if(fileNameHandle != NULL && name != NULL && type != NULL)    {        copySimStr(&(fileNameHandle->nameFile),name);        copySimStr(&(fileNameHandle->typeFile),type);        fileNameHandle->asciiPrefix = ascii1;        fileNameHandle->asciiSuffix = ascii2;        fileNameHandle->saveType = saveT; /* 0 replace old file*/        res = 1;    }    else    {        /* do nothing */    }    return res;}